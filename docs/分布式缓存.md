# 分布式缓存

## 1.缓存

缓存指将需要频繁访问的数据存放在内存中以加快用户访问速度的一种技术。缓存分进程级缓存和分布式缓存，进程级缓存指将数据缓存在服务内部，通过Map、List等结构实现存储；分布式缓存指将缓存数据单独存放在分布式系统中，以便于缓存的统一管理和存取。常用的分布式缓存系统有Ehcache、Redis和Memcached。

## 2.分布式缓存介绍

当我们需要频繁访问一些基本数据，比如用户信息、系统字典信息等热数据时，为了加快系统的访问速度，往往会选择把数据缓存在内存中，这样用户再次访问数据时直接从内存中获取数据即可，不用频繁查询数据库，这不但缩短了系统的访问时间，还有效降低了数据库的负载，具体流程如图8-1所示。在用户有写请求数据时先将数据写入数据库，然后写入缓存，用户再次访问该数据时会尝试直接从缓存中获取，如果在缓存中没有找到数据，则从数据库中查询并将结果返回给用户，同时将查询结果缓存起来以方便下次查询。

分布式缓存是相对于传统的进程内缓存而言的，对于传统的单点We b系统一般使用进程内缓存即可，而在微服务架构下往往需要一个分布式缓存来实现跨服务的缓存系统，比如，用户访问的数据库是被部署在多个服务器节点的集群数据库，缓存是被部署在多个服务器节点的分布式缓存，同时缓存之间有数据备份，在一个节点出问题后，分布式缓存会将用户的请求转发到其他备份节点以保障业务的正常运行。